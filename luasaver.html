<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Lua Runner</title>
<script src="https://unpkg.com/fengari-web/dist/fengari-web.js"></script>
<style>
  body { font-family: Arial; padding: 20px; background: #f0f0f0; }
  textarea { width: 100%; height: 200px; font-family: monospace; margin-bottom: 10px; }
  button { margin-right: 10px; }
  pre { background: #fff; padding: 10px; border: 1px solid #ccc; }
</style>
</head>
<body>
<h2>Lua Script Runner</h2>
<textarea id="luaCode">print("Merhaba Dünya")</textarea><br>
<button onclick="runLua()">Çalıştır</button>
<button onclick="saveFile()">Kaydet</button>
<pre id="output"></pre>

<script>
function runLua() {
    const code = document.getElementById('luaCode').value;
    const L = fengari.lauxlib.luaL_newstate();
    fengari.lualib.luaL_openlibs(L);
    const status = fengari.lauxlib.luaL_loadstring(L, fengari.to_luastring(code));
    if(status === 0) {
        if(fengari.lua.lua_pcall(L, 0, fengari.lua.LUA_MULTRET, 0) !== fengari.lua.LUA_OK){
            document.getElementById('output').innerText = fengari.to_jsstring(fengari.lua.lua_tostring(L,-1));
        } else {
            document.getElementById('output').innerText = 'Kod başarıyla çalıştı';
        }
    } else {
        document.getElementById('output').innerText = 'Hata: ' + fengari.to_jsstring(fengari.lua.lua_tostring(L,-1));
    }
}

function saveFile() {
    const code = document.getElementById('luaCode').value;
    const blob = new Blob([code], {type:"text/plain;charset=utf-8"});
    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = "script.lua";
    link.click();
}
</script>
</body>
</html>